{
  "variables": {
     "version": "0.0.1"
    ,"update": "true"
    ,"boot_wait": "2m"
    ,"boot_command_00": "<up><tab><up><tab><tab><wait10><enter>"
    ,"iso_url_00": "file://////LAF510017/H_Drive$/MSDN/9200.16384.WIN8_RTM.120725-1247_X64FRE_SERVER_EVAL_EN-US-HRM_SSS_X64FREE_EN-US_DV5.ISO"
    ,"iso_url_01": "file:///H:/MSDN/9200.16384.WIN8_RTM.120725-1247_X64FRE_SERVER_EVAL_EN-US-HRM_SSS_X64FREE_EN-US_DV5.ISO"
    ,"iso_url_02": "file:///F:/MSDN/9200.16384.WIN8_RTM.120725-1247_X64FRE_SERVER_EVAL_EN-US-HRM_SSS_X64FREE_EN-US_DV5.ISO"
    ,"iso_url_03": "http://download.microsoft.com/download/6/D/A/6DAB58BA-F939-451D-9101-7DE07DC09C03/9200.16384.WIN8_RTM.120725-1247_X64FRE_SERVER_EVAL_EN-US-HRM_SSS_X64FREE_EN-US_DV5.ISO"
    ,"iso_checksum_type": "sha1"
    ,"iso_checksum": "A491F985DCCFB5863F31B728DDDBEDB2FF4DF8D1"
    ,"iso_checksum_type": "md5"
    ,"iso_checksum": "8503997171f731d9bd1cb0b0edc31f3d"
    ,"ssh_username": "vagrant"
    ,"ssh_password": "vagrant"
    ,"ssh_wait_timeout": "6h"
    ,"disk_size": "130048"
    ,"memory": "2048"
    ,"cpus": "2"
    ,"headless": "false"
    ,"shutdown_command": "shutdown /s /t 10 /f /d p:4:1 /c \"Packer Shutdown\""
    

    ,"cm": "chef"
    ,"cm_version": ""
    ,"database_name": "{{env `DB_NAME`}}"
    ,"output_directory": "../_Builds/output-{{.BuildName}}-{{.Provider}}"
    ,"test": null
  }

  ,"builders": [
    {
       "type": "vmware-iso"
      ,"iso_urls": [
         "{{user `iso_url_00`}}"
        ,"{{user `iso_url_01`}}"
        ,"{{user `iso_url_02`}}"
        ,"{{user `iso_url_03`}}"
      ]
      ,"iso_checksum_type": "{{user `iso_checksum_type`}}"
      ,"iso_checksum": "{{user `iso_checksum`}}"
      ,"headless": "{{user `headless`}}"
      ,"boot_wait": "{{user `boot_wait`}}"
      ,"boot_command": [ "{{user `boot_command_00`}}" ]
      ,"ssh_username": "{{user `ssh_username`}}"
      ,"ssh_password": "{{user `ssh_password`}}"
      ,"ssh_wait_timeout": "{{user `ssh_wait_timeout`}}"
      ,"shutdown_command": "{{ user `shutdown_command`}}"
      ,"guest_os_type": "windows8srv-64"
      ,"tools_upload_flavor": "windows"
      ,"disk_size": "{{user `disk_size`}}"
      ,"vnc_port_min": 5900
      ,"vnc_port_max": 5980
      ,"floppy_files": [
         "./answer_files/2012_r2/Autounattend.xml"
        ,"./Provisioning/Scripts/microsoft-updates.bat"
        ,"./Provisioning/Scripts/win-updates.ps1"
        ,"./Provisioning/Scripts/openssh.ps1"
        ,"./Provisioning/Scripts/chocolatey.ps1"
      ]
      ,"vmx_data": {
         "RemoteDisplay.vnc.enabled": "false"
        ,"RemoteDisplay.vnc.port": "5900"
        ,"memsize": "{{user `memory`}}"
        ,"numvcpus": "{{user `cpus`}}"
        ,"scsi0.virtualDev": "lsisas1068"
      }
    }

   ,{
       "type": "virtualbox-iso"    
      ,"iso_urls": [
         "{{user `iso_url_00`}}"
        ,"{{user `iso_url_01`}}"
        ,"{{user `iso_url_02`}}"
        ,"{{user `iso_url_03`}}"
      ]
      ,"iso_checksum_type": "{{user `iso_checksum_type`}}"
      ,"iso_checksum": "{{user `iso_checksum`}}"
      ,"headless": "{{user `headless`}}"
      ,"boot_wait": "{{user `boot_wait`}}"
      ,"boot_command": [ "{{user `boot_command_00`}}" ]
      ,"ssh_username": "{{user `ssh_username`}}"
      ,"ssh_password": "{{user `ssh_password`}}"
      ,"ssh_wait_timeout": "{{user `ssh_wait_timeout`}}"
      ,"shutdown_command": "{{ user `shutdown_command`}}"
      ,"guest_os_type": "Windows2012_64"
      ,"disk_size": "{{user `disk_size`}}"
      ,"floppy_files": [
         "./answer_files/2012_r2/Autounattend.xml"
        ,"./Provisioning/Scripts/microsoft-updates.bat"
        ,"./Provisioning/Scripts/win-updates.ps1"
        ,"./Provisioning/Scripts/openssh.ps1"
        ,"./Provisioning/Scripts/oracle-cert.cer"
        ,"./Provisioning/Scripts/chocolatey.ps1"
      ]
      ,"vboxmanage": [
         [ "modifyvm","{{.Name}}","--memory","{{user `memory`}}" ]
        ,[ "modifyvm","{{.Name}}","--cpus","{{user `cpus`}}" ]
      ]
    }
  ]

  ,"provisioners": [
    {
       "type": "shell"
      ,"remote_path": "/tmp/script.bat"
      ,"execute_command": "{{.Vars}} cmd /c C:/Windows/Temp/script.bat"
      ,"scripts": [
         "./Provisioning/Scripts/vm-guest-tools.bat"
        ,"./Provisioning/Scripts/chef.bat"
        ,"./Provisioning/Scripts/vagrant-ssh.bat"
        ,"./Provisioning/Scripts/enable-rdp.bat"
        ,"./Provisioning/Scripts/compile-dotnet-assemblies.bat"
        ,"./Provisioning/Scripts/disable-auto-logon.bat"
        ,"./Provisioning/Scripts/compact.bat"
      ]
    }
    ,{
       "type": "shell"
      ,"inline": [ "rm -rf /tmp/*" ]
    }
  ]

  ,"post-processors": [
    {
       "type": "vagrant"
      ,"keep_input_artifact": false
      ,"output": "windows_2012_{{.Provider}}-{{user `version`}}.box"
      ,"vagrantfile_template": "vagrantfile-windows_2012.template"
    }
  ]
}
